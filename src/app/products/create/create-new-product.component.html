<h2>Cadastrar produto</h2>

<div class="well">
  <form #formProduct="ngForm">
    <div class="form-group">
      <label for="produto">Produto:</label>
      <input type="text" class="form-control" id="produto" name="produto" [(ngModel)]="products.title"
        #produto="ngModel" required>
      <div *ngIf="produto.errors && (produto.dirty || produto.touched)" class="alert alert-danger">
        <div [hidden]="!produto.errors.required">
          Digite o nome do produto.
        </div>
      </div>
      <label for="descricao">Descrição:</label>
      <input type="text" class="form-control" id="descricao" name="descricao" [(ngModel)]="products.description"
        #descricao="ngModel" required>
      <div *ngIf="descricao.errors && (descricao.dirty || descricao.touched)" class="alert alert-danger">
        <!-- [hidden] = esconde a msg se o nome estiver correto -->
        <div [hidden]="!descricao.errors.required">
          Digite a descrição do produto.
        </div>
      </div>
      <label for="preco">Preço (R$):</label>
      <input type="number" class="form-control" id="preco" name="preco" [(ngModel)]="products.price" #preco="ngModel"
        required>
      <div *ngIf="preco.errors && (preco.dirty || preco.touched)" class="alert alert-danger">
        <!-- [hidden] = esconde a msg se o nome estiver correto -->
        <div [hidden]="!preco.errors.required">
          Digite a descrição do produto.
        </div>
      </div>
      <label for="desconto">Desconto (%):</label>
      <input type="number" class="form-control" id="desconto" name="desconto" [(ngModel)]="products.discountPercentage"
        #desconto="ngModel" required>
      <div *ngIf="desconto.errors && (desconto.dirty || desconto.touched)" class="alert alert-danger">
        <!-- [hidden] = esconde a msg se o nome estiver correto -->
        <div [hidden]="!desconto.errors.required">
          Digite o valor do desconto do produto.
        </div>
      </div>
      <label for="avaliacao">Avaliação:</label>
      <input type="number" class="form-control" id="avaliacao" name="avaliacao" [(ngModel)]="products.rating"
        #avaliacao="ngModel" required>
      <div *ngIf="avaliacao.errors && (avaliacao.dirty || avaliacao.touched)" class="alert alert-danger">
        <!-- [hidden] = esconde a msg se o nome estiver correto -->
        <div [hidden]="!avaliacao.errors.required">
          Digite a avaliação do produto.
        </div>
      </div>
      <label for="estoque">Estoque:</label>
      <input type="number" class="form-control" id="estoque" name="estoque" [(ngModel)]="products.stock"
        #estoque="ngModel" required>
      <div *ngIf="estoque.errors && (estoque.dirty || estoque.touched)" class="alert alert-danger">
        <div [hidden]="!estoque.errors.required">
          Digite a quantidade de produtos no estoque.
        </div>
      </div>
      <label for="marca">Marca:</label>
      <input type="text" class="form-control" id="marca" name="marca" [(ngModel)]="products.brand" #marca="ngModel"
        required>
      <div *ngIf="marca.errors && (marca.dirty || marca.touched)" class="alert alert-danger">
        <div [hidden]="!marca.errors.required">
          Digite a marca do produto.
        </div>
      </div>
      <label for="categoria">Categoria:</label>
      <input type="text" class="form-control" id="categoria" name="categoria" [(ngModel)]="products.category"
        #categoria="ngModel" required>
      <div *ngIf="categoria.errors && (categoria.dirty || categoria.touched)" class="alert alert-danger">
        <div [hidden]="!categoria.errors.required">
          Digite a categoria do produto.
        </div>
      </div>
      <label for="thumbnail">Thumbnail:</label>
      <input type="url" class="form-control" id="thumbnail" name="thumbnail" [(ngModel)]="products.thumbnail"
        #thumbnail="ngModel" required>
      <div *ngIf="thumbnail.errors && (thumbnail.dirty || thumbnail.touched)" class="alert alert-danger">
        <div [hidden]="!thumbnail.errors.required">
          Insira a imagem do produto.
        </div>
      </div>
      <label for="images">Imagens:</label>
      <div *ngFor="let image of products.images; let i = index">
        <div class="form-group">
          <input type="url" class="form-control" id="image_{{i}}" name="image_{{i}}" [(ngModel)]="products.images[i]"
            required>
        </div>
        <button type="button" class="btn btn-danger" (click)="removeImage(i)">Excluir</button>
      </div>
    </div>
    <button type="button" class="btn btn-primary" (click)="addImage()">Adicionar Imagem</button>
    <div class="form-group text-center">
      <input type="submit" class="btn btn-success" (click)="createProduct()" value="Salvar"
        [disabled]="!formProduct.form.valid">
      <a [routerLink]="['/products']" class="btn btn-default">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Voltar
      </a>
    </div>
  </form>
</div>